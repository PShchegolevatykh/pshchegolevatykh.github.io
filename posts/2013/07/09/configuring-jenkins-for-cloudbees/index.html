<!DOCTYPE html>
<html>
    <head>
        <!--Import Google Icon Font-->
        <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--Import materialize.css-->
        <link type="text/css" rel="stylesheet" href="../../../../../css/materialize.min.css"  media="screen,projection"/>
        <link type="text/css" rel="stylesheet" href="../../../../../css/style.css" media="screen,projection">
        <link type="text/css" rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"  media="screen,projection"/>
        <link type="text/css" rel="stylesheet" href="../../../../../css/prism.css" media="screen,projection">
        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <!--Favicon related-->
        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../../../apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../../../apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../../../apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../../../apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../../../apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="../../../../../favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="../../../../../favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="../../../../../favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="../../../../../favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="../../../../../favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Pavel Shchegolevatykh's Blog'"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="../../../../../mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="../../../../../mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="../../../../../mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="../../../../../mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="../../../../../mstile-310x310.png" />
        <!--SEO-->
        <meta name="description" content="Pavel Shchegolevatykh is a software developer, who used to be in eSports. Writes about programming, lifestyle, gaming, hobbies and other topics.">
	    <meta name="author" content="Pavel Shchegolevatykh">
        <title>Pavel Shchegolevatykh - Programming, Lifestyle, Gaming, Hobbies, Random Thoughts</title>
    </head>

    <body>
        <nav class="white" role="navigation">
            <div class="nav-wrapper container">
                <ul class="left hide-on-med-and-down">
                    <li>
                        <a href="../../../../../">Home</a>
                    </li>
                    <li>
                        <a href="../../../../../about/">About</a>
                    </li>
                </ul>
                <ul id="nav-mobile" class="side-nav" style="transform: translateX(-100%);">
                    <li>
                        <a href="../../../../../">Home</a>
                    </li>
                    <li>
                        <a href="../../../../../about/">About</a>
                    </li>
                </ul>
                <a href="#" data-activates="nav-mobile" class="button-collapse">
                    <i class="material-icons">menu</i>
                </a>
            </div>
        </nav>
        <div class="container blog">
                <div class="row">
                    <div class="col s12">
                        <div id="post" class="section scrollspy">
                            <div class="row valign-wrapper">
                                <div class="col s2 m2 l1">
                                    <a href="../../../../../about/"><img src="../../../../../images/me.png" alt="Avatar" class="circle responsive-img"></a>
                                </div>
                                <div class="col s10 m10 l11">
                                    <span class="grey-text text-darken-1">
                                        By Pavel Shchegolevatykh / July 9, 2013
                                    </span>
                                </div>
                                    
                            </div>
                            <h4>Configuring Jenkins for CloudBees</h4>
                            <p class="flow-text">During my Java Internship program at my new job we had to develop an enterprise-like project to learn some new things and development processes. Continious integration was a big part of it.</p>
                            <h5>What is CloudBees?</h5>
                            <p class="flow-text"><a href="http://www.cloudbees.com/">CloudBees</a> is a Platform as a Service (PaaS) company that provides you with everything you need to move things to Cloud for free if you are a student.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="Cloudbees logo" src="images/CloudBees-Logo.png">
                            </div>
                            <p class="flow-text">The main features include:</p>
                            <p class="flow-text">* Jenkins Continuous Integration Server<br />* Run at Cloud feature (free cloud hosting for your applications, both web server and application server supported)<br />* Cloud Database (MySQL)<br />* Cloud Repository (Git, SVN, Maven)</p>
                            <p class="flow-text">Besides CloudBees has very responsive tech support. They helped me a lot when I was in need. They also did frequent free webinars which also were quite helpful. <strong>CloudBees does not even require a credit card info for their free tier.</strong></p>
                            <p class="flow-text">Of course if you are free user some of those features have certain restrictions (e.g. 300 minutes per month for the Jenkins CI Server), but in our case it was more than enough.</p>
                            <h5>Run at Cloud Configuration</h5>
                            <p class="flow-text">After you logged in to the system you see <strong>Control Panel</strong>. Add a new application in <strong>Applications</strong> section there.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="Run at Cloud control panel" src="images/rac.png">
                            </div>
                            <p class="flow-text">Then choose a *.war file from the list. After that you will be able to choose an application container (EJB or just servlet container). <strong>Basic Java Webapp</strong> option usually assumes Tomcat 6. The newer versions of Tomcat also supported but require some additional manipulations.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="Application Configuration" src="images/prof.png">
                            </div>
                            <p class="flow-text">If you have any flat file loggers in your application (like log4j) you should switch them from the file to console output, because you do not have direct access to the server file system. Unfortunately the HTTPS authentication was not supported for a free tier. You have to disable it. To make working with logs easier (e.g. search for particular things) there is an addon called <strong>Papertrail</strong>.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="Papertrail Logs" src="images/ppt.png">
                            </div>
                            <p class="flow-text">You should enable it for your app.</p>
                            <h5>Jenkins Configuration</h5>
                            <p class="flow-text">To create a build server instance on CloudBees you should go to the <strong>Control Panel</strong> and click add button under <strong>Builds</strong> section. When the initial configuration is done choose <strong>Manage Jenkins</strong> from the left hand side menu and then click on <strong>Configure System</strong>.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="Manage Jenkins" src="images/manage.png">
                            </div>
                            <p class="flow-text">There are many properties, but the most important are <strong>JDK</strong> and <strong>Maven</strong> sections. You should be able to chose from preinstalled versions or you can install a new ones. The main thing here is to properly specify <strong>JAVA_HOME</strong> and <strong>MAVEN_HOME</strong> variables.</p>
                            <p class="flow-text">After server is ready you can create a new job from the left hand side menu.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="New Jenkins Job" src="images/newjob.png">
                            </div>
                            <p class="flow-text">For Maven projects there is already <strong>Build a maven 2/3 project</strong> option that would eliminate all the manual configuration steps for your project. After that you can move on to the job configuration.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="Jenkins Job configuration" src="images/jobConfig.png">
                            </div>
                            <p class="flow-text">Here you can specify the name of your job. CloudBees public key should be inserted automatically. You obtain it during account registration process. Go to the <strong>Source Code Management</strong> and <strong>Build Triggers</strong> sections.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="Build triggers" src="images/btriggers.png">
                            </div>
                            <p class="flow-text">In <strong>Source Code Management</strong> section you should specify the type and repository URL. Your Code Repository can be installed anywhere including github or google code. Pay attention to the <strong>Check-out Strategy</strong> option. The <strong>Update as much as possible</strong>, which is default, does not always work properly (e.g. in my case all the files that should be deleted were still on the CI server). So I prefer <strong>Always check-out fresh copy</strong> option. It is a bit slower but safe.</p>
                            <p class="flow-text">The <strong>Build Triggers</strong> section is used to tell the CI server when to start the build. I prefer periodically <strong>Poll SCM</strong> to see if there new version available and in the schedule I set all five parameters to stars(*) to poll every minute.</p>
                            <p class="flow-text">The next two sections are <strong>Build</strong> and <strong>Post Steps</strong>.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="Build and Post Steps" src="images/bps.png">
                            </div>
                            <p class="flow-text">In a <strong>Build</strong> section for Maven projects specify the path to the *.pom file and additional goals (if necessary).</p>
                            <p class="flow-text"><strong>Post Steps</strong> section is perfect to apply new database scripts automatically. I made it that after each build the database is recreated with newly applied scripts (drop tables -> create tables -> insert some test data). In my team we found this really useful.</p>
                            <p class="flow-text"><strong>Build Settings</strong> allow you to set up E-mail (or any other) notifications if the build gets broken. So people can fix the build as fast as they can.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="Build settings" src="images/bs.png">
                            </div>
                            <p class="flow-text">Post-build Actions are mainly used for automated deployment. In case of CloudBees you should provide a valid ApplicationID (should correspond to "Run at Cloud" Application name). The "first match" pattern is used to locate your *.war file and deploy it to the server.</p>
                            <p class="flow-text">Your job configuration is finally finished. You can click <strong>Save</strong> button and see if it works.</p>
                            <h5>Allow Anonymous Access to the Job</h5>
                            <p class="flow-text">Jenkins security model is based on roles and permissions. To enable anonymous access you should enable it in Jenkins config first: <strong>Manage Jenkins ->Configure System->Enable read-only access for anonymous users</strong>. Then you can manage roles using the Roles plugin which should be already installed on CloudBees.</p>
                            <div class="center">
                                <img class="materialboxed" data-caption="Role settings" src="images/roles.png">
                            </div>
                            <p class="flow-text">Role editor is pretty self-explanatary. Yellow highlighting means that permission is granted (checked) by default.</p>
                            <h5>Other similar services</h5>
                            <p class="flow-text">If you are a .NET person there is a <a href="http://tfs.visualstudio.com/">Team Foundation Service</a>, which includes source control, build server, planing  and test execution. It is also free for teams of no more than five people. It is fully integrated with Visual Studio. If you want a free cloud database and some other features that are not presented in TFS you can try <a href="https://appharbor.com/">AppHarbor</a>. I've tried it and it's great!</p>
                            <div class="right social-share">
                                <a href="https://www.facebook.com/sharer/sharer.php?u=http://www.pshchegolevatykh.com/posts/2013/07/09/configuring-jenkins-for-cloudbees/" onclick="window.open(this.href,'_blank', 'width=700, height=500'); return false;"><i class="fa fa-facebook"></i></a>
                                <a href="https://twitter.com/intent/tweet?text=http://www.pshchegolevatykh.com/posts/2013/07/09/configuring-jenkins-for-cloudbees/" onclick="window.open(this.href,'_blank', 'width=700, height=500'); return false;"><i class="fa fa-twitter"></i></a>
                                <a href="http://vk.com/share.php?url=http://www.pshchegolevatykh.com/posts/2013/07/09/configuring-jenkins-for-cloudbees/" onclick="window.open(this.href,'_blank', 'width=700, height=500'); return false;"><i class="fa fa-vk"></i></a>
                                <a href="https://www.linkedin.com/shareArticle?url=http://www.pshchegolevatykh.com/posts/2013/07/09/configuring-jenkins-for-cloudbees/" onclick="window.open(this.href,'_blank', 'width=700, height=500'); return false;"><i class="fa fa-linkedin"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            
            <div id="comments">
                <div id="disqus_thread"></div>
            </div>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
        </div>
                                    

        <footer>
            <div class="footer-copyright">
                <div class="container">
                   <!-- footer text -->
                </div>
            </div>
        </footer>
        
        <!--Import jQuery before materialize.js-->
        <script type="text/javascript" src="https://use.fontawesome.com/061481d937.js"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="../../../../../js/materialize.min.js"></script>
        <script type="text/javascript" src="../../../../../js/site.js"></script>
        <script type="text/javascript" src="../../../../../js/prism.js"></script>
        <script>
            var disqus_config = function() {
                this.page.url = "http://www.pshchegolevatykh.com/posts/2013/07/09/configuring-jenkins-for-cloudbees/"; // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = "/posts/2013/07/09/configuring-jenkins-for-cloudbees/"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document,
                s = d.createElement('script');
                s.src = '//pshchegolevatykh.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
        <!--Google Analytics-->
        <script>
            (function(i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function() {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-86164699-1', 'auto');
            ga('send', 'pageview');
        </script>
    </body>
</html>